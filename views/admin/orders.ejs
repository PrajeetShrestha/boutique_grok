<%- include('../partials/header') %>
<main>
    <section class="admin-section">
        <h1>Orders Management</h1>
        <div class="order-list">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Customer Name</th>
                        <th>Delivery Date</th>
                        <th>Unit</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% orders.forEach(order => { %>
                        <tr>
                            <td><%= order.id %></td>
                            <td><%= order.fullName %></td>
                            <td><%= new Date(order.deliveryDate).toLocaleDateString() %></td>
                            <td><%= order.unit %></td>
                            <td>
                                <select class="status-select" data-order-id="<%= order.id %>" onchange="updateOrderStatus(this)">
                                    <option value="pending" <%= (!order.status || order.status === 'pending') ? 'selected' : '' %>>Pending</option>
                                    <option value="in_progress" <%= order.status === 'in_progress' ? 'selected' : '' %>>In Progress</option>
                                    <option value="completed" <%= order.status === 'completed' ? 'selected' : '' %>>Completed</option>
                                    <option value="archived" <%= order.status === 'archived' ? 'selected' : '' %>>Archived</option>
                                </select>
                                <span class="status-badge status-<%= order.status || 'pending' %>">
                                    <%= (order.status || 'pending').replace('_', ' ') %>
                                </span>
                            </td>
                            <td class="action-buttons">
                                <button class="btn btn-view" onclick="showMeasurements(<%= JSON.stringify(order) %>)">
                                    View Details
                                </button>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Measurements Modal -->
    <div id="measurements-modal" class="modal">
        <div class="modal-content measurements-content">
            <span class="close-modal">&times;</span>
            <h2>Order Details</h2>
            <div class="customer-info">
                <h3>Customer Information</h3>
                <p><strong>Name:</strong> <span id="modal-customer-name"></span></p>
                <p><strong>Delivery Date:</strong> <span id="modal-delivery-date"></span></p>
                <p><strong>Unit:</strong> <span id="modal-unit"></span></p>
            </div>
            <div class="measurements-grid">
                <div class="measurement-section">
                    <h3>Blouse Measurements</h3>
                    <div class="measurement-list" id="blouse-measurements"></div>
                </div>
                <div class="measurement-section">
                    <h3>Lehenga Measurements</h3>
                    <div class="measurement-list" id="lehenga-measurements"></div>
                </div>
            </div>
        </div>
    </div>
</main>
<%- include('../partials/footer') %> 